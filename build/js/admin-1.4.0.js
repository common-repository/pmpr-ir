/*! For license information please see admin-1.4.0.js.LICENSE.txt */
(()=>{var e={839:(e,t,n)=>{"use strict";n.r(t)}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(839),function(){const e=PRHelper.getType(),t=PRHelper.getHTML(),n=PRHelper.getHook(),a=PRHelper.getTool(),s=(PRHelper.getFormat(),PRHelper.getServer()),r=PRHelper.getRequest(),l=PRBackendHelper.getModal();let o=null;function i(e){let t=e.split("."),n=PMPRPLGVar,a=null;if(void 0!==n){for(let e=0;e<t.length;++e){if(void 0===n[t[e]]){n=!1;break}n=n[t[e]]}a=n}return a}function p(e){r.ajax(i("ajax.check_job")).onSuccess((n=>{switch(n.status){case"running":setTimeout((()=>p(e)),1e4);break;case"done":t.removeClass(e,"pmpr-plg-spinner-show"),e.replaceWith(t.createElement(n.replace))}})).onError((n=>{l.show({type:"warning",content:a.error2string(n)}),t.removeClass(e,"pmpr-plg-spinner-show")})).send({job:t.getData(e,"job"),nonce:t.getData(e,"nonce")})}function c(e,t){if("string"==typeof e)for(let n in t)e=e.replace(`{ ${n} }`,t[n]);else e="";return e}function g(e,n,a,l,p={}){if(t.isElement(e)){let c=t.getElement("body");clearTimeout(o),o=setTimeout((()=>{t.addClass(c,"loading-content");let o=t.getValue(e),g=e.closest(".wrap");n=t.getElement(n,g),t.isElement(n)&&(t.hide(n),s.addParam("s",o),r.ajax(i(`ajax.${a}`)).onSuccess((e=>l(e,g,n))).onFinally((()=>{t.removeClass(c,"loading-content"),t.show(n)})).send({...p,s:o,type:t.getData(e,"type")}))}),500)}}n.on("load",(()=>{n.on("click",(n=>{n.preventDefault();let s=t.getTarget(n,".pr-ajax-action"),o=t.getAttribute(s,"id");e.isEmpty(o)||(t.setElementActivity(s,!1,!1),t.addClass(s,["pmpr-plg-spinner","show"]),r.ajax(o).onSuccess((t=>{e.isEmpty(t)?a.reload():l.show({type:"success",content:t,onClose:()=>{a.reload()}})})).onError((e=>{l.show({type:"warning",content:a.error2string(e)})})).onFinally((()=>{t.setElementActivity(s,!0,!1),t.removeClass(s,["pmpr-plg-spinner","show"])})).send({nonce:t.getData(s,"nonce")}))}),".pr-ajax-action"),n.bubbling("click",(s=>{s.preventDefault();let o=t.getTarget(s,".pr-component-action");if(t.is(o,".updating-message"))return;let p,g,m=t.getData(o,"job"),u=t.getData(o,"title"),d=t.getParent(o),f=t.getParent(o,".pr-modal"),E=i(`confirms.${m}`),y=!1,h=t.is(o,".pr-loading-action")||"update"===m;g=d.closest(".plugin-card-top"),t.isElement(g)?(h=y=!0,p=t.getElement(".plugin-title",g).innerHTML):(g=d.closest("tr"),p=t.getElement(".column-primary > strong",g).innerHTML);let v={job:m,name:t.getData(o,"name"),type:t.getData(o,"type"),nonce:t.getData(o,"nonce"),install_page:y?1:0};t.isElement(f)?t.addClass(t.getElement(".pr-spinner",f),"show"):!y&&h&&(t.getData(o,"on")&&(t.setData("default",u.innerHTML),t.setHTML(u,t.getData(o,"on"))),t.addClass(o,["pmpr-plg-spinner","show"]));let b="",w="";if(y){switch(m){case"install":b=i("translations.installing"),w=i("translations.installed");break;case"activate":b=i("translations.activating"),w=i("translations.activated")}e.isEmpty(b)||(t.removeClass(o,"button-primary"),t.replace(b,t.getElement(".action-title",o))),t.addClass(o,"updating-message")}else t.setElementActivity(o,!1,!1);let T=r.ajax(i("ajax.run_job")).onSuccess((n=>{y?(t.setElementActivity(o,!1,!1),t.replace(w,t.getElement(".action-title",o)),t.removeClass(o,"updating-message"),t.addClass(o,"updated-message"),setTimeout((()=>{t.replace(n,o,!0)}),2e3)):e.isEmpty(n)?a.reload():l.show({title:"",type:"success",content:c(n,{name:p}),onClose:()=>{a.reload()}})})).onError((e=>{l.show({type:"warning",content:c(a.error2string(e),{name:p})}),t.getData(o,"default")&&t.setHTML(u,t.getData(o,"default"))})).onFinally((()=>{y||t.setElementActivity(o,!0,!1),t.removeClass(t.getElement(".pr-spinner",f),"show"),t.removeClass(o,"updating-message"),h&&t.removeClass(o,["pmpr-plg-spinner","show"]),n.trigger("pr-component-action-completed")}));E?(E=c(E,{name:p}),confirm(E)&&T.send(v)):T.send(v)}),".pr-component-action"),n.on("submit",(e=>{e.preventDefault(),n.trigger("input","input.wp-filter-search")}),"form.search-components"),n.on("input paste change",(n=>{g(t.getTarget(n),"#bulk-action-form","search_installed_component",((n,a,s)=>{if(t.isElement(a)&&!e.isEmpty(n)){let r=n.table,l=n.search;if(!e.isEmpty(r)&&(t.setHTML(s,r),!e.isEmpty(l))){let e=t.getElement(".subtitle",a),n=t.getElement(".page-title-action",a);t.isElement(e)?e.replaceWith(l):t.isElement(n)&&t.insert(l,n)}}}))}),".installed-components-search"),n.on("input paste change",(n=>{s.addParam("tab","search"),g(t.getTarget(n),"#plugin-filter","search_component",((n,a,s)=>{if(t.isElement(a)>0&&n.result){t.setHTML(s,n.result);let r=t.getElement(".filter-links",a);!e.isEmpty(r)&&n.filters&&r.replaceWith(n.filters)}}),{tab:"search"})}),".available-components-search"),e.each(t.getElements(".pr-running-action"),(e=>{p(e)}))}))}()})();